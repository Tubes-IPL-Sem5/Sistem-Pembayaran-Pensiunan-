<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.BorderPane?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.mycompany.pensiunan.controller.KeuanganController"
            stylesheets="@keuangan.css"
            prefWidth="1400" prefHeight="800">

    <!-- SIDEBAR -->
    <left>
        <VBox styleClass="sidebar" spacing="20">
            <padding>
                <Insets top="30" right="15" bottom="30" left="15"/>
            </padding>
            <Region VBox.vgrow="ALWAYS"/>
            
            <Button fx:id="btnLogout" styleClass="sidebar-btn-logout" text="âŽ‹" onAction="#handleLogout"/>
        </VBox>
    </left>

    <!-- MAIN CONTENT -->
    <center>
        <BorderPane>
            <!-- HEADER -->
            <top>
                <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20">
                    <padding>
                        <Insets top="20" right="40" bottom="20" left="40"/>
                    </padding>
                    
                    <VBox>
                        <Label text="Manajemen Keuangan" styleClass="header-title"/>
                        <Label text="Pembayaran Gaji Pensiunan" styleClass="header-subtitle"/>
                    </VBox>
                    
                    <Region HBox.hgrow="ALWAYS"/>
                    
                    <Label fx:id="lblNamaUser" text="Admin Keuangan" styleClass="header-name"/>
                </HBox>
            </top>

            <!-- CENTER CONTENT -->
            <center>
                <StackPane styleClass="main-content">
                    
                    <!-- MENU CARDS -->
                    <VBox fx:id="paneMenu" spacing="40" alignment="CENTER">
                        <Label text="Pilih Menu" styleClass="menu-title"/>
                        
                        <HBox spacing="50" alignment="CENTER">
                            <VBox alignment="CENTER" spacing="15" onMouseClicked="#showTransferDana" styleClass="menu-card-clickable">
                                <VBox styleClass="menu-icon-container-green">
                                    <Label text="ðŸ’°" styleClass="menu-icon-large"/>
                                </VBox>
                                <Label text="Transfer Uang" styleClass="menu-label"/>
                                <Label text="Pensiun" styleClass="menu-label"/>
                            </VBox>

                            <VBox alignment="CENTER" spacing="15" onMouseClicked="#showDataGaji" styleClass="menu-card-clickable">
                                <VBox styleClass="menu-icon-container-blue">
                                    <Label text="ðŸ“‹" styleClass="menu-icon-large"/>
                                </VBox>
                                <Label text="Data Gaji" styleClass="menu-label"/>
                                <Label text="Pensiunan" styleClass="menu-label"/>
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- TRANSFER DANA SECTION -->
                    <VBox fx:id="paneTransfer" spacing="25" visible="false" styleClass="content-section">
                        <padding>
                            <Insets top="30" right="40" bottom="30" left="40"/>
                        </padding>
                        
                        <!-- Header Section -->
                        <HBox alignment="CENTER_LEFT" spacing="20">
                            <Button text="â†" styleClass="back-btn" onAction="#handleBack"/>
                            <Label text="Daftar Pengajuan Transfer" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            
                            <!-- Search Box -->
                            <HBox spacing="10" styleClass="search-container" alignment="CENTER_LEFT">
                                <Label text="ðŸ”" styleClass="search-icon"/>
                                <TextField fx:id="txtSearchTransfer" promptText="Cari nama atau NIP..." styleClass="search-field" prefWidth="250"/>
                            </HBox>
                        </HBox>

                        <!-- Table -->
                        <VBox styleClass="table-wrapper" VBox.vgrow="ALWAYS">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <TableView fx:id="tablePensiunan" styleClass="custom-table" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colNama" prefWidth="180" text="Nama Pensiunan"/>
                                    <TableColumn fx:id="colNip" prefWidth="140" text="NIP"/>
                                    <TableColumn fx:id="colLalu" prefWidth="180" text="Nominal Terakhir"/>
                                    <TableColumn fx:id="colAkan" prefWidth="200" text="Nominal Akan Ditransfer"/>
                                    <TableColumn fx:id="colStatus" prefWidth="150" text="Status"/>
                                </columns>
                            </TableView>
                        </VBox>

                        <!-- Action Button -->
                        <HBox alignment="CENTER_RIGHT" spacing="15">
                            <Button text="Tolak Semua" styleClass="btn-reject"/>
                            <Button text="Proses Pembayaran" onAction="#handleProsesPembayaran" styleClass="btn-process"/>
                        </HBox>
                    </VBox>

                    <!-- DATA GAJI SECTION -->
                    <VBox fx:id="paneDataGaji" spacing="25" visible="false" styleClass="content-section">
                        <padding>
                            <Insets top="30" right="40" bottom="30" left="40"/>
                        </padding>
                        
                        <!-- Header Section -->
                        <HBox alignment="CENTER_LEFT" spacing="20">
                            <Button text="â†" styleClass="back-btn" onAction="#handleBack"/>
                            <Label text="Riwayat Data Gaji Pensiunan" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            
                            <!-- Search Box -->
                            <HBox spacing="10" styleClass="search-container" alignment="CENTER_LEFT">
                                <Label text="ðŸ”" styleClass="search-icon"/>
                                <TextField fx:id="txtSearchGaji" promptText="Cari nama atau NIP..." styleClass="search-field" prefWidth="250"/>
                            </HBox>

                        </HBox>

                        <!-- Filter Buttons -->
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Label text="Filter:" styleClass="filter-label"/>
                            <Button text="Semua" styleClass="filter-btn" fx:id="btnFilterAllGaji" onAction="#filterSemua"/>
                            <Button text="Golongan I" styleClass="filter-btn" fx:id="btnFilterI" onAction="#filterGolI"/>
                            <Button text="Golongan II" styleClass="filter-btn" fx:id="btnFilterII" onAction="#filterGolII"/>
                            <Button text="Golongan III" styleClass="filter-btn" fx:id="btnFilterIII" onAction="#filterGolIII"/>
                            <Button text="Golongan IV" styleClass="filter-btn" fx:id="btnFilterIV" onAction="#filterGolIV"/>
                        </HBox>

                        <!-- Table -->
                        <VBox styleClass="table-wrapper" VBox.vgrow="ALWAYS">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            
                            <TableView fx:id="tableDataGaji" styleClass="custom-table" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colGajiNama" prefWidth="200" text="Nama Pensiunan"/>
                                    <TableColumn fx:id="colGajiNip" prefWidth="140" text="NIP"/>
                                    <TableColumn fx:id="colGajiTgl" prefWidth="150" text="Tanggal Pensiun"/>
                                    <TableColumn fx:id="colGajiLalu" prefWidth="180" text="Nominal Gaji"/>
                                    <TableColumn fx:id="colGajiGol" prefWidth="100" text="Golongan"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>

                </StackPane>
            </center>
        </BorderPane>
    </center>
</BorderPane>